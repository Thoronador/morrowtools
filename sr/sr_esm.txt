
Format of Skyrim's ESM PlugIn Files

(All that follows below is still an assumption!)


  Record
  ======
    4 bytes: char Name[4]
        4-byte record name string (not null-terminated)
    4 bytes: long Size
        Size of the record not including the 20 bytes of header data.
	16 bytes:
		Unknown values, probably four groups of 4-byte integers/ flags



  (Sub-)Record
  ============
    4 bytes: char Name[4]
        4-byte sub-record name string (not null-terminated)
    2 bytes: uint16 Size
        Size of the sub-record not including the 6 bytes of header data.
    ? bytes: Sub-Record data.
        Format depends on the sub-record type).


  Groups:
  =======
    GRUP
      4 byte - uint32 - size of group, including the header
      4 byte - char[4] - name of group to follow
      12 byte - unknown data
      ? bytes - group data


Records and their sub-records:

  TES4: Main header(?)
      HEDR (12 bytes)
        Unknown, possibly three 4-byte values?
        4 bytes - float, version number
        4 bytes - unknown
        4 bytes - unknown
      CNAM - null-terminated string
      INTV (4 bytes)
        4 bytes - integer value


  GMST: Game Settings
      EDID: editor ID (string, 0-terminated)
      DATA: the data (string/int/float)
              format determined by first character of ID
              s = string (length varies)
              i = integer (4 bytes)
              f = floating point value (4 bytes)


  GLOB: global variables
      EDID: editor ID (string, NUL-terminated)
      FNAM (1 byte)
          type (s=short, l=long, f=float)
      FLTV (4 bytes)
          value (always stored as float?)


  KYWD: Keyword (whatever that may be)
      EDID (string, NUL-terminated)
          editor ID
      CNAM (4 bytes) - optional subrecord
          unknown value


  EYES: eyes
      EDID: (string, NUL-terminated)
          editorID
      FULL (4 byte)
          unknown data
      ICON  (string, NUL-terminated)
          texture path
      DATA (1 byte)
          unknown data (flags?)


  WOOP: word of power
      EDID (string, NUL-terminated)
          editorID
      FULL (4 byte) optional
          unknown data
      TNAM (4 byte)
          unknown data          


  WEAP: Weapon record
      EDID: editor ID (string, NUL-terminated)
      OBND (12 bytes)
          unknown data
      FULL (4 bytes?)
          unknown data
      MODL (string)
          model path (.NIF)
      MODT (12, 24 or 36 bytes possible?, maybe in general a multiple of 12 bytes)
          unknown data
      EITM (4 bytes)
          unknown data
      EAMT (2 bytes)
          unknown data
      ETYP (4 bytes)
          unknown data
      BIDS (4 bytes)
          unknown data
      BAMT (4 bytes)
          unknown data
      KSIZ (4 bytes)
          unknown data
      KWDA (12 bytes)
          unknown data
      DESC (4 bytes)
          unknown data (description?)
      INAM (4 bytes)
          unknown data
      WNAM (4 bytes)
          unknown data
      TNAM (4 bytes)
          unknown data
      NAM9 (4 bytes)
          unknown data
      NAM8 (4 bytes)
          unknown data
      DATA (10 bytes)
          unknown data
      DNAM (100 bytes)
          unknown data
      CRDT (16 bytes)
          unknown data
      VNAM (4 bytes)
          unknown data